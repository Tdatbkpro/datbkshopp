<app-header></app-header>
<div class="container">
    <Form [formGroup]="userProfileForm">
        <div class="row">

            <div class="col-md-4 mx-auto" >
                <h2 class="product-header">Thông tin người dùng</h2>
                
                <div class="mb-3">
                    <label for="fullname" class="form-label">Họ và tên</label>
                    <input type="text" formControlName="fullname" class="form-control" style="color:aquamarine"
                        id="fullname" 
                        [class.is-invalid]="userProfileForm.get('fullname')!.invalid && userProfileForm.get('fullname')!.touched">
                    @if(userProfileForm.get('fullname')!.invalid &&
                    userProfileForm.get('fullname')!.touched) {
                    <div class="invalid-feedback">
                        Họ và tên là trường bắt buộc.
                    </div>
                    }
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Email </label>
                    <input type="text" class="form-control" id="email" formControlName="email"
                        style="color:aquamarine"
                        [class.is-invalid]="userProfileForm.get('email')!.invalid && userProfileForm.get('email')!.touched">
                    @if(userProfileForm.get('email')!.invalid
                    && userProfileForm.get('email')!.touched) {
                    <div class="invalid-feedback">
                        {{ userProfileForm.get('email')!.hasError('email') ? 'Email không hợp lệ' : 'Email là trường bắt buộc'
                        }}
                    </div>
                    }
                </div>
                <div class="mb-3">
                    <label for="phone" class="form-label">Số điện thoại</label>
                    <input type="phone" class="form-control readonly-input" id="phone" formControlName="phone_number"
                           [class.is-invalid]="userProfileForm.get('phone_number')!.invalid && userProfileForm.get('phone_number')!.touched">
                    <div *ngIf="userProfileForm.get('phone_number')!.invalid && userProfileForm.get('phone_number')!.touched" class="invalid-feedback">
                      Số điện thoại là trường bắt buộc và ít nhất 10 ký tự.
                    </div>
                  </div>                  
                  
                <div class="mb-3">
                    <label for="password" class="form-label">Mật khẩu mới</label>
                    <input type="password" 
                           class="form-control" 
                           formControlName="password"                         
                           placeholder="Mật khẩu" 
                           required
                           id="password" 
                           [class.is-invalid]="userProfileForm.get('password')!.invalid 
                            && userProfileForm.get('password')!.touched">
                    @if(userProfileForm.get('password')!.invalid 
                      && userProfileForm.get('password')!.touched) {
                        <div class="invalid-feedback">
                          Mật khẩu ít nhất 5 ký tự.
                        </div>
                      }                
                  </div>              
                  <div class="mb-3">
                    <label for="retype_password" class="form-label">Nhập lại mật khẩu</label>
                    <input type="password" 
                           class="form-control" 
                           formControlName="retype_password"                         
                           placeholder="Nhập lại mật khẩu" 
                           required
                           id="retype_password" 
                           [class.is-invalid]="userProfileForm.get('retype_password')!.invalid 
                              && userProfileForm.get('retype_password')!.touched">
                      @if(userProfileForm.hasError('passwordMismatch')) {
                        <div class="invalid-feedback">
                          Mật khẩu không khớp.
                        </div>
                      }                  
                  </div>
                <div class="mb-3">
                    <label for="date_of_birth" class="form-label">Sinh nhật</label>
                    <input type="date" class="form-control" id="date_of_birth" formControlName="date_of_birth"
                        style="color:aquamarine"
                        [class.is-invalid]="userProfileForm.get('date_of_birth')!.invalid && userProfileForm.get('date_of_birth')!.touched">
                    @if(userProfileForm.get('date_of_birth')!.invalid
                    && userProfileForm.get('date_of_birth')!.touched) {
                    <div class="invalid-feedback">
                        Số điện thoại là trường bắt buộc và ít nhất 10 ký tự.
                    </div>
                    }
                </div>
                <div class="mb-3">
                    <label for="address" class="form-label">Địa chỉ</label>
                    <input type="text" 
                        formControlName="address" 
                        class="form-control" 
                        id="address" 
                        [class.is-invalid]="userProfileForm.get('address')!.invalid && userProfileForm.get('address')!.touched">                
                </div> 
                <div class="text-center">
                    <button type="button" (click)="save()" class="btn btn-primary update-button">Cập nhật thông tin</button>
                  </div>                  
            </div>
            
        </div>
    </Form>
</div>
<app-footer></app-footer>
